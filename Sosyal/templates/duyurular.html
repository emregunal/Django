{% extends "base.html" %}

{% block title %}Duyurular - DoğustanSosyal{% endblock %}
{% block page_title %}Duyurular{% endblock %}
{% block page_subtitle %}Tüm güncel haberler ve bildirimler{% endblock %}

{% block extra_styles %}
<style>
    .announcements-page {
        animation: fadeInUp 0.6s ease;
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .two-column-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
    }

    .column {
        display: flex;
        flex-direction: column;
        gap: 25px;
    }

    .section {
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
    }

    .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e74c3c;
    }

    .section-title {
        font-size: 16px;
        font-weight: 700;
        color: #333;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .section-count {
        background: #e74c3c;
        color: white;
        padding: 3px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
    }

    .section-urgent .section-header { border-color: #dc2626; }
    .section-urgent .section-count { background: #dc2626; }

    .section-etkinlik .section-header { border-color: #f59e0b; }
    .section-etkinlik .section-count { background: #f59e0b; }

    .section-kulup .section-header { border-color: #059669; }
    .section-kulup .section-count { background: #059669; }

    .announcements-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-height: 400px;
        overflow-y: auto;
    }

    .announcement-item {
        padding: 12px;
        border-radius: 8px;
        background: #f8f9fa;
        border-left: 3px solid #e0e0e0;
        transition: all 0.2s;
    }

    .announcement-item:hover {
        background: #f0f0f0;
    }

    .announcement-item.urgent {
        background: #fef2f2;
        border-left-color: #dc2626;
    }

    .announcement-item.etkinlik {
        border-left-color: #f59e0b;
    }

    .announcement-item.kulup {
        border-left-color: #059669;
    }

    .item-title {
        font-size: 13px;
        font-weight: 600;
        color: #333;
        margin-bottom: 5px;
        line-height: 1.3;
    }

    .item-content {
        font-size: 12px;
        color: #666;
        line-height: 1.5;
        margin-bottom: 8px;
    }

    .item-meta {
        display: flex;
        justify-content: space-between;
        font-size: 11px;
        color: #999;
    }

    .item-date {
        color: #e74c3c;
        font-weight: 500;
    }

    .empty-message {
        text-align: center;
        padding: 20px;
        color: #999;
        font-size: 13px;
    }

    @media (max-width: 900px) {
        .two-column-layout {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="announcements-page">
    <div class="two-column-layout">
        
        <!-- SOL KOLON -->
        <div class="column">
            <!-- ACİL UYARILAR -->
            <div class="section section-urgent">
                <div class="section-header">
                    <h2 class="section-title">Acil Uyarılar</h2>
                </div>
                <div class="announcements-list">
                    {% for duyuru in duyurular %}
                        {% if duyuru.kategori == 'acil' %}
                        <div class="announcement-item urgent">
                            <h3 class="item-title">{{ duyuru.baslik }}</h3>
                            <p class="item-content">{{ duyuru.icerik|truncatewords:20 }}</p>
                            <div class="item-meta">
                                <span>{{ duyuru.yazar }}</span>
                                <span class="item-date">{{ duyuru.olusturma_tarihi|date:"d M" }}</span>
                            </div>
                        </div>
                        {% endif %}
                    {% empty %}
                    <div class="empty-message">Acil uyarı yok</div>
                    {% endfor %}
                </div>
            </div>

            <!-- ETKİNLİKLER -->
            <div class="section section-etkinlik">
                <div class="section-header">
                    <h2 class="section-title">Etkinlikler</h2>
                </div>
                <div class="announcements-list">
                    {% for duyuru in duyurular %}
                        {% if duyuru.tip == 'etkinlik' %}
                        <div class="announcement-item etkinlik">
                            <h3 class="item-title">{{ duyuru.baslik }}</h3>
                            <p class="item-content">{{ duyuru.icerik|truncatewords:20 }}</p>
                            <div class="item-meta">
                                <span>{{ duyuru.yazar }}</span>
                                <span class="item-date">{{ duyuru.olusturma_tarihi|date:"d M" }}</span>
                            </div>
                        </div>
                        {% endif %}
                    {% empty %}
                    <div class="empty-message">Etkinlik yok</div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- SAĞ KOLON -->
        <div class="column">
            <!-- KULÜPLER -->
            <div class="section section-kulup">
                <div class="section-header">
                    <h2 class="section-title">Kulüpler</h2>
                </div>
                <div class="announcements-list">
                    {% for duyuru in duyurular %}
                        {% if duyuru.tip == 'kulup' %}
                        <div class="announcement-item kulup">
                            <h3 class="item-title">{{ duyuru.baslik }}</h3>
                            <p class="item-content">{{ duyuru.icerik|truncatewords:20 }}</p>
                            <div class="item-meta">
                                <span>{{ duyuru.yazar }}</span>
                                <span class="item-date">{{ duyuru.olusturma_tarihi|date:"d M" }}</span>
                            </div>
                        </div>
                        {% endif %}
                    {% empty %}
                    <div class="empty-message">Kulüp yok</div>
                    {% endfor %}
                </div>
            </div>

            <!-- GENEL DUYURULAR -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Genel Duyurular</h2>
                </div>
                <div class="announcements-list">
                    <!-- Akademik Takvim - En yakın 2 etkinlik -->
                    {% for duyuru in yaklasan_akademik %}
                    <div class="announcement-item" style="border-left-color: #2563eb; background: #eff6ff;">
                        <h3 class="item-title">{{ duyuru.baslik }}</h3>
                        <p class="item-content">{{ duyuru.icerik|truncatewords:20 }}</p>
                        <div class="item-meta">
                            <span style="color: #2563eb;">Akademik Takvim</span>
                            <span class="item-date">{{ duyuru.olusturma_tarihi|date:"d M" }}</span>
                        </div>
                    </div>
                    {% endfor %}
                    
                    <!-- Genel Duyurular -->
                    {% for duyuru in duyurular %}
                        {% if duyuru.tip == 'duyuru' %}
                        <div class="announcement-item">
                            <h3 class="item-title">{{ duyuru.baslik }}</h3>
                            <p class="item-content">{{ duyuru.icerik|truncatewords:20 }}</p>
                            <div class="item-meta">
                                <span>{{ duyuru.yazar }}</span>
                                <span class="item-date">{{ duyuru.olusturma_tarihi|date:"d M" }}</span>
                            </div>
                        </div>
                        {% endif %}
                    {% empty %}
                    <div class="empty-message">Genel duyuru yok</div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}